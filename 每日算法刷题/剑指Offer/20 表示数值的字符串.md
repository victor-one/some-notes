# 20 表示数值的字符串

## 题目内容

请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。

数值（按顺序）可以分成以下几个部分：

1. 若干空格

2. 一个 小数 或者 整数

3. （可选）一个 'e' 或 'E' ，后面跟着一个 整数

4. 若干空格

小数（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（'+' 或 '-'）
2. 下述格式之一：
   1. 至少一位数字，后面跟着一个点 '.'
   2. 至少一位数字，后面跟着一个点 '.' ，后面再跟着至少一位数字
   3. 一个点 '.' ，后面跟着至少一位数字


整数（按顺序）可以分成以下几个部分：

1. （可选）一个符号字符（'+' 或 '-'）
2. 至少一位数字

部分**数值**列举如下：

* ["+100", "5e2", "-123", "3.1416", "-1E-16", "0123"]

部分**非数值**列举如下：

* ["12e", "1a3.14", "1.2.3", "+-5", "12e+5.4"]

**示例 1：**

```
输入：s = "0"
输出：true
```

**示例 2：**

```
输入：s = "e"
输出：false
```

**示例 3：**

```
输入：s = "."
输出：false
```

**示例 4：**

```
输入：s = "    .1  "
输出：true
```

**提示：**

* 1 <= s.length <= 20
* s 仅含英文字母（大写和小写），数字（0-9），加号 '+' ，减号 '-' ，空格 ' ' 或者点 '.' 。

## 解题方法

### 有限状态自动机

**算法流程：**

1. 确定自动机；
2. 按位遍历字符串，根据自动机进行判断，若不符合则返回False，若符合，根据当前状态切换至下一个状态；
3. 遍历完毕后，根据最后的状态来判断是否为True。

**复杂度分析：**

* **时间复杂度**为O(N)
* **空间复杂度**为O(1)

**代码：**

```python
class Solution:
    def isNumber(self, s: str) -> bool:
        # determine the states
        states = [
            {' ': 0, 's': 1, 'd': 2, '.': 4},# 0 start with 'blank'
            {'d': 2, '.': 4},# 1 'sign' befor 'e'
            {'d': 2, '.': 3, 'e': 5, ' ': 8},# 2 'digit' befor 'dot'
            {'d': 3, 'e': 5, ' ': 8},# 3 'digit' after 'dot'
            {'d': 3},# 4 'digit' after 'dot' ('blank' befor 'dot')
            {'s': 6, 'd': 7},# 5 'e'
            {'d': 7},# 6 'sign' after 'e'
            {'d': 7, ' ': 8},# 7 'digit' after 'e'
            {' ': 8}# 8 end with blank
        ]

        p = 0 # for judging states
        for c in s:
            if '0' <= c <= '9': t = 'd'
            elif c in '+-': t = 's'
            elif c in 'eE': t = 'e'
            elif c in ' .': t = c
            else: t = '?'
            if t not in states[p]: return False
            p = states[p][t] # switch to next state
        return p in (2, 3, 7, 8)
```

## 总结

这是我第一次遇到这种问题，有限状态自动机的问题真是非常有趣，这个问题的难点就在于事先确定好自动机。

刷完剑指offer后，可以找一些有限状态自动机的题目做一下。希望后续的题目中会有这方面的内容。