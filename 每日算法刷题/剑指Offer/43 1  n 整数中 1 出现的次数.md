# 43 1 ~ n 整数中 1 出现的次数

## 题目内容

输入一个整数 n ，求1～n这n个整数的十进制表示中1出现的次数。

例如，输入12，1～12这些整数中包含1 的数字有1、10、11和12，1一共出现了5次。

**示例 1：**

```
输入：n = 12
输出：5
```

**示例 2：**

```
输入：n = 13
输出：6
```

**限制：**

1 <= n < 2^31

## 解题方法

### 数学方法

**算法流程**

1. 按照位数从低位往高位进行分析，计算每位中 1 出现次数并相加。
2. 分析每位1出现次数时需考虑三种情况：
   1. 当为0的时候，次数为高位乘以位数
   2. 当为1的时候，次数为高位乘以位数加上低位加1
   3. 当为其他时，次数为高位加一后再乘以位数

**复杂度分析**

* **时间复杂度**为O(logN)
* **空间复杂度**为O(1)

**代码**

```python
class Solution:
    def countDigitOne(self, n: int) -> int:
        digit, res = 1, 0
        cur, high, low = n%10, n//10, 0
        while high != 0 or cur != 0:
            if cur == 0: res += high * digit
            elif cur == 1: res += high * digit + low + 1
            else: res += (high + 1) * digit
            low += cur * digit
            cur = high % 10
            high //= 10
            digit *= 10
        return res
```

## 总结

这道题目还是蛮值得思考的，需要多加揣摩。