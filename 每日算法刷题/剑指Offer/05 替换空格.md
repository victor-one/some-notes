# 05 替换空格

## 题目内容

请实现一个函数，把字符串 s 中的每个空格替换成"%20"。

**示例 1：**

```
输入：s = "We are happy."
输出："We%20are%20happy."
```

**限制：**

`0 <= s 的长度 <= 10000`

## 解题方法

### 方法一：遍历添加

**算法流程：**

1. 新建一个空的字符串`res`；
2. 遍历原字符串`s`中的每个字符`i`：
   1. 如果`i`是空格，则在`res`中添加字符串“%20”；
   2. 否则，将原字符`i`放入`res`中；
3. 遍历完毕后，返回`res`。

**复杂度分析：**

* **时间复杂度**为O(N)
* **空间复杂度**为O(N)

**代码：**

```python
class Solution(object):
    def replaceSpace(self, s):
        """
        :type s: str
        :rtype: str
        """
        res = ''
        for i in s:
            if i == ' ': res += '%20'
            else: res += i
        return res
```

### 方法二：原位修改

**算法流程：**

1. 初始化：空格数量`count`，字符串`s`的长度`len`；
2. 遍历`s`，遇到空格则`count++`；
3. 将`s`的长度修改为`len + count * 2`；
4. 倒序遍历修改：`i`指向原字符串尾部元素，`j`指向新字符串尾部元素；当`i = j`时跳出（此时表明已经没有空格了）：
   1. 当`s[i]`不为空格时：`s[j] = s[i]`；
   2. 当`s[i]`为空格时，将字符串闭区间`s[j-2,j]`的元素修改为“%20”，`j -= 2`；
5. 返回修改后的字符串`s`。

**复杂度分析：**

**时间复杂度**为O(N)

**空间复杂度**为O(1)

**代码：**

```c++
class Solution {
public:
    string replaceSpace(string s) {
		int count = 0, len = s.size();
        // 统计空格数量
        for (char c : s) {
            if (c == ' ') count++;
        }
        // 修改s的长度
        s.resize(len + 2 * count);
        // 倒序遍历修改
        for(int i = len-1, j = s.size() - 1; i < j; i--, j--) {
            if (s[i] == ' ') {
                s[j - 2] = '%';
            	s[j - 1] = '2';
            	s[j] = '0';
            	j -= 2;
            }
            else 
                s[j] = s[i];
        }
        return s;
    }
};
```

## 总结

这一道题目说真的蛮简单的，但是看解析之后还是有惊到的感觉，因为我只想到了遍历添加的方法，而没有想到原位修改。

需要注意的是原位修改的方法只有在C中可以使用，因此在上面的方法二中使用的也是C++。

这个方法其实也挺简单的，只不过python不允许修改字符串，要不然高低给他整出来。

C的思路就是用双指针的方法，没啥好说的，运行之后再次感慨C的效率之高，但是要写的代码也是真的相对来说多太多了。