# 正则表达式全攻略

大家好，这里是最近重新复习了一下正则表达式的Vic，最近在复习的过程中突然想，是否能够完整地给大家讲解一下正则表达式的相关知识，并让完全不会的初学者也能够学会呢？这是我的一个尝试。

![image-20220820193158272](C:\Users\51304\AppData\Roaming\Typora\typora-user-images\image-20220820193158272.png)



------

在我之前每次学习一样新东西之前，第一节课必然是这个东西的定义，那么，haahahah...，在本文中的第一节当然也是这样了。

## 正则表达式到底是什么

相信初学者常常在教程中听到使用正则表达式的这个说法，那么正则表达式是个什么东西呢？这有是用来干什么的呢？

在这里首先给出定义，正则表达式是**一个用于在程序中查找匹配复杂字符串的工具**，这个概念似乎还是并不是很好理解，那么用一个实际的场景来说明吧。

比如说我们想要编写一个用于将阿拉伯数字转换为中文数字的函数（感兴趣的同学可以试试这个题目，还是很有意思的），那么在这个函数中，我们需要做的第一步就是确定输入的形参（在这里我们将其命名为`num`），我们需要确定`num`中传入的是一个纯数字，在这里我们可以使用这个正则表达式来进行匹配：`^\d*(\.\d*)?$`，关于这个正则表达式的含义，我们在之后的内容中进行讲解。

不管怎么说，你只需要记住，正则表达式是一个用于匹配复杂字符串的工具就可以了。

接下来，我将在讲解正则表达式的同时，结合一些具体例子进行讲解，在这里，给大家提供一个[链接](https://deerchao.cn/tools/wegester/)用于对正则表达式进行线上的练习。

## 简单的入门小栗子🌰

假设我们需要在一篇英文文献中查找单词<u>ha</u>，一般来说，我们下意识会想到采用正则表达式`ha`来进行匹配。那么这个正则表达式真的可以成功的匹配到吗？

回答这个问题之前，我们需要先弄明白这个正则表达式到底是什么含义。这个正则表达式可以匹配这样的字符串，即**由两个字符组成，其中第一个为h，第二个为a**。

看起来这个方法似乎是成功了，然而当我们用下列字符串`happy、alpha`进行测试的时候，神奇的事情发生了👀，上述的字符串也会被正则表达式`ha`匹配到，很显然，这并不符合我们的预期。为了精确地匹配单词<u>ha</u>，在这里，我们需要使用这个正则表达式`\bha\b`。

在这个正则表达式中的`\b`是一个**元字符**，其主要作用是表示**单词的开头或结尾**。（准确的说，其匹配的是单词边界，即这样一个**位置**，此位置的前面或后面有一个不为`\w`，好吧，这就又出现问题了😥，`\w`是什么呢？让我们先把这个问题放一边，过会儿我们再来看。）这样，我们就可以匹配到目标的单词<u>ha</u>了。

有同学就有疑惑了，我们如何匹配<u>ha</u>开头的这种字符串呢？我们可以使用这种正则表达式：`\bha.*\b`，在这个正则表达式中，`.`也是一个元字符，其**匹配除了换行符以外的任意字符**。`*`同样也是一个元字符，其**表示前面的内容重复任意次**。当`.*`连在一起的时候，这就**表示任意数量的不包含换行的字符**。同理，我们可以使用这个正则表达式来匹配<u>ha</u>结尾的字符串：`\b.*ha\b`。

下来，让我们再看一个小栗子：**匹配一个0开头的六位数字字符串**。

由于正则表达式中字符是一一对应的关系，因此，我们可以这样写`0\d\d\d\d\d`（`\d`代表**一位数字0-9**），很明显这样写就很繁琐，其中有大量重复的字符串，为了减少这种重复，我们使用这个正则表达式：`0\d{5}`，在这个正则表达式中`{5}`表示前面的`\d`**连续重复匹配5次**。

## 元字符

在之前的几个🌰中，我们介绍了几个常用的元字符，接下来，在本节的内容中，我们将进一步对元字符进行介绍。

在上一节中，我们介绍了元字符`\w`，现在对这个元字符进行解释，这个字符其实很好理解，其可以**匹配字母、数字、下划线甚至还有汉字等**。

下面让我们再看一个🌰，在这个🌰中，我们要匹配以a开头的六位单词，大家可以想一下这个问题的答案。

答案是`\ba\w{5}\b`。那么如果要匹配以a开头的任意单词呢？答案同样也很简单：`\ba\w*\b`。

如果要匹配由一个或以上数量的a组成的字符串呢？同学们可能想到这样写：`\baa*\b`。那么存不存在更好的写法呢？答案是当然的，我们可以这样写：`\ba+\b`，这里的`+`的作用和`*`其实类似，表示重复匹配，不同的是，`+`表示**重复匹配一次或以上（即至少有一次）**，而`*`则**可以重复匹配0次**。

下面贴一下常用的元字符：

| 元字符 | 说明                           |
| :----: | ------------------------------ |
|   .    | 匹配除换行符以外的任意字符     |
|   \w   | 匹配字母、数字、下划线以及汉字 |
|   \s   | 匹配任意的空白符               |
|   \d   | 匹配数字                       |
|   \b   | 匹配单词的开始或结束           |
|   ^    | 匹配字符串的开始               |
|   $    | 匹配字符串的结束               |

在这里需要有如下几点注意：

1. `\s`中匹配任意的空白符，其中空白符包括空格、制表符（Tab）、换行符、中文空格等。
2. `^`和`$`的使用和`\b`类似，当我们需要匹配一个6位或12位的数字密码时，我们可以使用这个正则表达式：`^\d{6,12}$`。

另外，由于正则表达式中存在着处理多行的选项，因此，当选中此选项时，`^`和`$`就用于匹配行的开始与结束位置了。

## 字符转义

有时候，我们需要查找`\`、`*`、`+`之类的特殊字符，如果在正则表达式中直接写的话，很明显，它会被理解成元字符。为了解决这种情况，我们采用`\`来进行字符的特殊意义的取消，即使用`\\`、`\*`、`\+` 。

## 重复

在之前的内容中，我们对重复已经有了一定的概念。在本节将对重复进行进一步的介绍。

我们将用于重复的元字符称为限定符，其主要作用是指定前面内容的匹配次数。

| 限定符 | 说明                          |
| :----: | ----------------------------- |
|   *    | 重复0次或更多（重复任意次）   |
|   +    | 重复1次或更多（至少重复一次） |
|   ？   | 重复0次或1次（最多重复一次）  |
|  {n}   | 重复n次                       |
|  {n,}  | 重复n次或更多次               |
| {n,m}  | 重复n次到m次                  |

## 字符类

当我们想要匹配一个首字母为a、b、c的字符串时，我们该怎么做呢？正则表达式如下：`^[abc].*$`。

在这个表达式中，`[abc]`表示此位置可以匹配的元素为a、b、c。

