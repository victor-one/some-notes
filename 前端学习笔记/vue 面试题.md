# Vue 面试题

## 1. 组件通信

我们按照场景进行讲解吧，一般来说我们常见的场景有四种：父子组件通信、爷孙组件通信、兄弟组件通信、全局组件通信。

**父子组件通信**：

1. **props**，父组件通过props向子组件传值，在使用的时候需要显式声明；
2. **emit**，子组件通过自定义事件向父组件中传值；
3. **ref**，父组件通过 ref 对子组件添加标记，从而获取子组件中的数据，需要注意的是在`setup`中**需要使用`defineExpose`将数据暴露出来**才可以获得；
4. **\$attrs**，父组件通过 \$attrs 进行属性继承，从而进行数据传递，需要注意的是 \$attrs 默认是继承在最外面的元素上的，如果想绑定在内部，需要禁用属性继承，手动使用`v-bind`绑定`$attrs`；
5. **\$parent**，写选项式API的时候使用，但是不推荐，考虑到组件的复用性。

**兄弟组件通信：**

1. **\$parent/\$root**，利用父组件进行通信；
2. 借助全局组件通信方式：
   1. **EventBus**：需要借助第三方插件 mitt 等才可以实现；
   2. **全局状态管理工具 vuex/Pinia**。

**爷孙组件通信**：

1. 同样可以采用全局组件通信方式；
2. **provide/inject**。

## 2. v-if 和 v-for 哪个优先级更高

1. 在实践中不应该把 v-if 和 v-for 放在一起使用；
2. 在 vue3 中 **v-if 的优先级高于 v-for**，因此在 v-if 执行的时候，它**调用的变量还不存在，因此会导致异常**；
3. 在实际使用中有两种情况可能这样做：
   1. 过滤列表中的项目，这个时候应该先**定义一个计算属性**，在计算属性中返回过滤后的列表，也可以采用**在外面包一层`<template>`**，然后再在上面使用 v-for ，里面使用 v-if 进行判断。
   2. 避免渲染本来应该被隐藏的项目，这个时候可以**在外面包一层`<template>`**，在上面使用 v-if 进行判断，然后再进行 v-for 渲染。
4. 在 vue3 的**文档中明确声明了不要将两者同时用在同一个元素上**。

## 3. 简述 Vue 的生命周期以及每个阶段做的事